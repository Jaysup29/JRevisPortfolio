<?php

use App\Models\Skill;
use Livewire\Volt\Component;
use Illuminate\Support\Collection;


new class extends Component
{
    public $activeSection = 'about';
    public $projects = [];
    public $technologies = [];
    public $darkMode = false;
    public $showContactForm = false;
    public $contactForm = [
        'name' => '',
        'email' => '',
        'subject' => '',
        'message' => ''
    ];
    
    public function mount()
    {
        $this->loadTechnologies();
        
        $this->projects = [
            [
                'title' => 'E-Commerce Platform',
                'description' => 'Full-stack e-commerce solution with Laravel and Livewire',
                'tech' => ['Laravel', 'Livewire', 'MySQL', 'Tailwind CSS'],
                'status' => 'Completed',
                'image' => 'üõí'
            ],
            [
                'title' => 'Real-time Chat Application',
                'description' => 'WebSocket-based chat app with real-time messaging',
                'tech' => ['PHP', 'WebSockets', 'JavaScript', 'Redis'],
                'status' => 'In Progress',
                'image' => 'üí¨'
            ],
            [
                'title' => 'CMS Dashboard',
                'description' => 'Content management system with advanced admin panel',
                'tech' => ['Laravel', 'Volt', 'Alpine.js', 'MySQL'],
                'status' => 'Completed',
                'image' => 'üìä'
            ]
        ];
    }

    private function getRandomColor()
    {
        $colors = [
            'bg-red-400 dark:bg-red-500',
            'bg-blue-400 dark:bg-blue-500',
            'bg-green-400 dark:bg-green-500',
            'bg-yellow-400 dark:bg-yellow-500',
            'bg-purple-400 dark:bg-purple-500',
            'bg-pink-400 dark:bg-pink-500',
            'bg-indigo-400 dark:bg-indigo-500',
            'bg-orange-400 dark:bg-orange-500',
            'bg-teal-400 dark:bg-teal-500',
            'bg-cyan-400 dark:bg-cyan-500',
            'bg-lime-400 dark:bg-lime-500',
            'bg-emerald-400 dark:bg-emerald-500',
        ];

        return $colors[array_rand($colors)];
    }

    public function loadTechnologies()
    {
        $skills = Skill::where('status', 'active')->get(['name', 'icon_path as icon']);
        
        $this->technologies = $skills->map(function($skill) {
            return [
                'id' => $skill->id,
                'name' => $skill->name,
                'icon' => $skill->icon ?? '',
                'color' => $this->getRandomColor()
            ];
        })->toArray();
    }

    public function randomizeColors()
    {
        $this->technologies = collect($this->technologies)->map(function($tech) {
            $tech['color'] = $this->getRandomColor();
            return $tech;
        })->toArray();
    }

    public function setActiveSection($section)
    {
        $this->activeSection = $section;
    }

    public function toggleDarkMode()
    {
        $this->darkMode = !$this->darkMode;
        $this->dispatch('toggle-dark-mode');
    }

    public function toggleContactForm()
    {
        $this->showContactForm = !$this->showContactForm;
    }

    public function submitContactForm()
    {
        $this->validate([
            'contactForm.name' => 'required|min:2',
            'contactForm.email' => 'required|email',
            'contactForm.subject' => 'required|min:5',
            'contactForm.message' => 'required|min:10'
        ]);

        // Here you would typically send an email or save to database
        session()->flash('message', 'Thank you for your message! I\'ll get back to you soon.');
        
        $this->contactForm = ['name' => '', 'email' => '', 'subject' => '', 'message' => ''];
        $this->showContactForm = false;
    }
}; ?>

<div class="min-h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-300 p-2 sm:p-4">
    <!-- Dark Mode Toggle -->
    <button 
        wire:click="toggleDarkMode"
        class="fixed top-4 right-4 z-50 bg-white dark:bg-gray-800 p-3 rounded-full shadow-lg hover:shadow-xl transition-all group"
        title="Toggle Dark Mode"
    >
        <span class="block dark:hidden text-gray-700 group-hover:text-yellow-500 transition-colors">üåô</span>
        <span class="hidden dark:block text-yellow-400 group-hover:text-yellow-300 transition-colors">‚òÄÔ∏è</span>
    </button>

    <div class="max-w-7xl mx-auto">
        <!-- Portfolio Grid Layout -->
        <div class="mobile-grid">
            
            <!-- Main Hero Section -->
            <div class="sm:col-span-2 lg:col-span-2">
                <div class="portfolio-card-colored bg-portfolio-dark dark:bg-gray-800 text-white h-full min-h-[300px] sm:min-h-[400px] relative overflow-hidden">
                    <div class="relative z-10 h-full flex flex-col justify-center">
                        <h1 class="mobile-hero-title font-bold mb-2 sm:mb-4 leading-tight">
                            JAY-AR <span class="text-portfolio-yellow dark:text-yellow-400">REVIS</span>
                        </h1>
                        <p class="text-lg sm:text-xl lg:text-2xl mb-4 sm:mb-6 text-blue-200 dark:text-blue-300">
                            Full Stack Web Developer 
                        </p>
                        <p class="text-gray-300 dark:text-gray-400 leading-relaxed mobile-text max-w-2xl">
                            Passionate full-stack developer with expertise in modern web technologies. 
                            I create robust, scalable applications using Laravel, Livewire, and cutting-edge 
                            frontend frameworks. Always eager to learn and implement the latest industry standards.
                        </p>
                        
                        <!-- Mobile CTA Buttons -->
                        <div class="mt-6 flex flex-col sm:flex-row gap-3 sm:gap-4">
                            <button class="bg-portfolio-yellow hover:bg-yellow-500 text-gray-900 px-6 py-3 rounded-lg font-semibold transition-all hover:scale-105">
                                View Projects
                            </button>
                            <button wire:click="toggleContactForm" class="border border-portfolio-yellow text-portfolio-yellow hover:bg-portfolio-yellow hover:text-gray-900 px-6 py-3 rounded-lg font-semibold transition-all">
                                Contact Me
                            </button>
                        </div>
                    </div>
                    
                    <!-- Decorative Elements -->
                    <div class="absolute top-0 right-0 w-24 h-24 sm:w-32 sm:h-32 bg-portfolio-yellow opacity-10 rounded-full transform translate-x-8 sm:translate-x-16 -translate-y-8 sm:-translate-y-16"></div>
                    <div class="absolute bottom-0 left-0 w-16 h-16 sm:w-24 sm:h-24 bg-portfolio-blue opacity-20 rounded-full transform -translate-x-6 sm:-translate-x-12 translate-y-6 sm:translate-y-12"></div>
                </div>
            </div>

            <!-- Enhanced About Me Section -->
            <div class="sm:col-span-2 lg:col-span-2 portfolio-card-colored bg-portfolio-blue dark:bg-blue-600 text-white">
                <div class="h-full flex flex-col p-4 sm:p-6">
                    <div class="text-center mb-6">
                        <h2 class="text-3xl sm:text-4xl font-bold mb-2">ABOUT ME</h2>
                        <div class="w-16 h-1 bg-blue-200 mx-auto rounded-full"></div>
                    </div>
                    
                    <!-- Professional Summary -->
                    <div class="mb-8">
                        <h3 class="text-xl font-semibold mb-3 flex items-center gap-2">
                            <span class="text-2xl">üë®‚Äçüíª</span>
                            Professional Journey
                        </h3>
                        <p class="text-blue-100 dark:text-blue-200 leading-relaxed text-sm sm:text-base">
                            With over 5 years of experience in web development, I specialize in creating dynamic, 
                            user-friendly applications that solve real-world problems. My passion lies in crafting 
                            clean, maintainable code and delivering exceptional user experiences.
                        </p>
                    </div>

                    <!-- Skills & Expertise -->
                    <div class="mb-8">
                        <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
                            <span class="text-2xl">üöÄ</span>
                            Core Expertise
                        </h3>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                            <div class="bg-blue-700 dark:bg-blue-800 bg-opacity-50 rounded-lg p-3">
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="text-lg">üîß</span>
                                    <span class="font-semibold">Backend Development</span>
                                </div>
                                <p class="text-blue-200 text-sm">PHP, Laravel, MySQL, API Development</p>
                            </div>
                            <div class="bg-blue-700 dark:bg-blue-800 bg-opacity-50 rounded-lg p-3">
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="text-lg">üé®</span>
                                    <span class="font-semibold">Frontend Development</span>
                                </div>
                                <p class="text-blue-200 text-sm">Livewire, JavaScript, Tailwind CSS, Alpine.js</p>
                            </div>
                            <div class="bg-blue-700 dark:bg-blue-800 bg-opacity-50 rounded-lg p-3">
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="text-lg">‚òÅÔ∏è</span>
                                    <span class="font-semibold">Cloud & DevOps</span>
                                </div>
                                <p class="text-blue-200 text-sm">AWS, Docker, Git, CI/CD Pipelines</p>
                            </div>
                            <div class="bg-blue-700 dark:bg-blue-800 bg-opacity-50 rounded-lg p-3">
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="text-lg">üì±</span>
                                    <span class="font-semibold">Modern Development</span>
                                </div>
                                <p class="text-blue-200 text-sm">Responsive Design, PWAs, Performance Optimization</p>
                            </div>
                        </div>
                    </div>

                    <!-- Personal Values -->
                    <div class="flex-1">
                        <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
                            <span class="text-2xl">üí°</span>
                            What Drives Me
                        </h3>
                        <div class="space-y-3">
                            <div class="flex items-start gap-3">
                                <span class="text-yellow-300 mt-1">‚≠ê</span>
                                <div>
                                    <span class="font-medium">Clean Code Advocate</span>
                                    <p class="text-blue-200 text-sm">Writing readable, maintainable, and scalable code</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-3">
                                <span class="text-yellow-300 mt-1">‚≠ê</span>
                                <div>
                                    <span class="font-medium">Continuous Learner</span>
                                    <p class="text-blue-200 text-sm">Always exploring new technologies and best practices</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-3">
                                <span class="text-yellow-300 mt-1">‚≠ê</span>
                                <div>
                                    <span class="font-medium">Problem Solver</span>
                                    <p class="text-blue-200 text-sm">Finding creative solutions to complex challenges</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Technology Stack Carousel -->
            <div class="sm:col-span-2 lg:col-span-3">
                <div class="carousel-container relative overflow-hidden">
                    <!-- Navigation Buttons -->
                    <button class="absolute top-1/2 left-2 transform -translate-y-1/2 bg-black bg-opacity-30 hover:bg-opacity-50 text-white p-2 rounded-full transition-all duration-300 z-10" id="prevBtn">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                        </svg>
                    </button>
                    
                    <button class="absolute top-1/2 right-2 transform -translate-y-1/2 bg-black bg-opacity-30 hover:bg-opacity-50 text-white p-2 rounded-full transition-all duration-300 z-10" id="nextBtn">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </button>

                    <!-- Continuous rotating carousel -->
                    <div class="carousel-track" id="carouselTrack">
                        <div class="carousel-wrapper">
                            @foreach($technologies as $tech)
                            <div class="portfolio-card-colored {{ $tech['color'] }} text-white carousel-item">
                                <div class="tech-icon mx-auto">
                                    <span class="text-base sm:text-xl lg:text-2xl font-bold"><img src="{{ asset($tech['icon']) }}"/></span>
                                </div>
                                <p class="text-center mt-2 sm:mt-3 font-semibold text-xs sm:text-sm lg:text-base">{{ $tech['name'] }}</p>
                            </div>
                            @endforeach
                            
                            <!-- Duplicate items for seamless loop -->
                            @foreach($technologies as $tech)
                            <div class="portfolio-card-colored {{ $tech['color'] }} text-white carousel-item">
                                <div class="tech-icon mx-auto">
                                    <span class="text-base sm:text-xl lg:text-2xl font-bold"><img src="{{ asset($tech['icon']) }}"/></span>
                                </div>
                                <p class="text-center mt-2 sm:mt-3 font-semibold text-xs sm:text-sm lg:text-base">{{ $tech['name'] }}</p>
                            </div>
                            @endforeach
                        </div>
                    </div>

                    <!-- Dots Navigation -->
                    <div class="flex justify-center mt-4 space-x-2" id="dotsContainer">
                        <!-- Dots will be generated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Enhanced Contact Section -->
            <div class="sm:col-span-2 lg:col-span-2 portfolio-card-colored bg-portfolio-green dark:bg-green-600 text-white">
                <div class="h-full flex flex-col p-4 sm:p-6">
                    <div class="text-center mb-6">
                        <h3 class="text-3xl sm:text-4xl font-bold mb-2">LET'S CONNECT</h3>
                        <div class="w-16 h-1 bg-green-200 mx-auto rounded-full"></div>
                        <p class="text-green-100 mt-3">Ready to bring your ideas to life?</p>
                    </div>

                    @if(session('message'))
                        <div class="bg-green-700 border border-green-500 text-green-100 px-4 py-3 rounded mb-4">
                            {{ session('message') }}
                        </div>
                    @endif

                    @if(!$showContactForm)
                        <!-- Contact Information -->
                        <div class="space-y-6 mb-6">
                            <!-- Primary Contact -->
                            <div class="bg-green-700 dark:bg-green-800 bg-opacity-50 rounded-lg p-4">
                                <h4 class="font-semibold mb-3 flex items-center gap-2">
                                    <span class="text-xl">üì¨</span>
                                    Get In Touch
                                </h4>
                                <div class="space-y-3">
                                    <div class="flex items-center gap-3">
                                        <span class="text-lg">üìß</span>
                                        <div>
                                            <div class="font-medium">Email</div>
                                            <a href="mailto:jay.revis@email.com" class="text-green-200 hover:text-white transition-colors text-sm">
                                                jay.revis@email.com
                                            </a>
                                        </div>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <span class="text-lg">üì±</span>
                                        <div>
                                            <div class="font-medium">Phone</div>
                                            <a href="tel:+639123456789" class="text-green-200 hover:text-white transition-colors text-sm">
                                                +63 912 345 6789
                                            </a>
                                        </div>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <span class="text-lg">üìç</span>
                                        <div>
                                            <div class="font-medium">Location</div>
                                            <span class="text-green-200 text-sm">Philippines (Remote Available)</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Availability & Response Time -->
                            <div class="bg-green-700 dark:bg-green-800 bg-opacity-50 rounded-lg p-4">
                                <h4 class="font-semibold mb-3 flex items-center gap-2">
                                    <span class="text-xl">‚è∞</span>
                                    Availability
                                </h4>
                                <div class="space-y-2">
                                    <div class="flex justify-between">
                                        <span class="text-green-200">Response Time:</span>
                                        <span class="font-medium">Within 24 hours</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-green-200">Timezone:</span>
                                        <span class="font-medium">GMT+8 (PHT)</span>
                                    </div>
                                    <div class="flex items-center gap-2 mt-3">
                                        <div class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></div>
                                        <span class="text-sm font-medium">Available for new projects</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Contact Form Toggle Button -->
                        <button 
                            wire:click="toggleContactForm"
                            class="w-full bg-green-800 dark:bg-green-900 hover:bg-green-900 dark:hover:bg-green-800 text-white py-3 px-4 rounded-lg font-semibold transition-all hover:scale-105 flex items-center justify-center gap-2"
                        >
                            <span class="text-lg">‚úâÔ∏è</span>
                            Send Message
                        </button>
                    @else
                        <!-- Contact Form -->
                        <form wire:submit.prevent="submitContactForm" class="space-y-4 flex-1">
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-green-100 text-sm font-medium mb-1">Name *</label>
                                    <input 
                                        type="text" 
                                        wire:model="contactForm.name"
                                        class="w-full px-3 py-2 bg-green-800 border border-green-600 rounded text-white placeholder-green-300 focus:outline-none focus:border-green-400"
                                        placeholder="Your Name"
                                    >
                                    @error('contactForm.name') <span class="text-red-300 text-xs">{{ $message }}</span> @enderror
                                </div>
                                <div>
                                    <label class="block text-green-100 text-sm font-medium mb-1">Email *</label>
                                    <input 
                                        type="email" 
                                        wire:model="contactForm.email"
                                        class="w-full px-3 py-2 bg-green-800 border border-green-600 rounded text-white placeholder-green-300 focus:outline-none focus:border-green-400"
                                        placeholder="your@email.com"
                                    >
                                    @error('contactForm.email') <span class="text-red-300 text-xs">{{ $message }}</span> @enderror
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-green-100 text-sm font-medium mb-1">Subject *</label>
                                <input 
                                    type="text" 
                                    wire:model="contactForm.subject"
                                    class="w-full px-3 py-2 bg-green-800 border border-green-600 rounded text-white placeholder-green-300 focus:outline-none focus:border-green-400"
                                    placeholder="Project Discussion"
                                >
                                @error('contactForm.subject') <span class="text-red-300 text-xs">{{ $message }}</span> @enderror
                            </div>
                            
                            <div>
                                <label class="block text-green-100 text-sm font-medium mb-1">Message *</label>
                                <textarea 
                                    wire:model="contactForm.message"
                                    rows="4"
                                    class="w-full px-3 py-2 bg-green-800 border border-green-600 rounded text-white placeholder-green-300 focus:outline-none focus:border-green-400 resize-none"
                                    placeholder="Tell me about your project..."
                                ></textarea>
                                @error('contactForm.message') <span class="text-red-300 text-xs">{{ $message }}</span> @enderror
                            </div>
                            
                            <div class="flex gap-3">
                                <button 
                                    type="submit"
                                    class="flex-1 bg-green-800 dark:bg-green-900 hover:bg-green-900 dark:hover:bg-green-800 text-white py-2 px-4 rounded font-medium transition-all flex items-center justify-center gap-2"
                                >
                                    <span>Send Message</span>
                                    <span class="text-sm">üöÄ</span>
                                </button>
                                <button 
                                    type="button"
                                    wire:click="toggleContactForm"
                                    class="bg-green-700 hover:bg-green-800 text-white py-2 px-4 rounded font-medium transition-all"
                                >
                                    Cancel
                                </button>
                            </div>
                        </form>
                    @endif
                </div>
            </div>

            <!-- Projects Section -->
            <div class="sm:col-span-2 lg:col-span-2 portfolio-card-colored bg-portfolio-red dark:bg-red-600 text-white min-h-[300px]">
                <div class="h-full flex flex-col">
                    <h3 class="text-2xl sm:text-3xl lg:text-4xl font-bold mb-6 sm:mb-8 text-center">PROJECTS</h3>
                    
                    <div class="flex-1 space-y-4 sm:space-y-6 overflow-y-auto max-h-60 sm:max-h-80">
                        @foreach($projects as $index => $project)
                        <div class="bg-red-600 dark:bg-red-700 bg-opacity-50 dark:bg-opacity-50 rounded-lg p-3 sm:p-4 hover:bg-opacity-70 dark:hover:bg-opacity-70 transition-all cursor-pointer">
                            <div class="flex justify-between items-start mb-2">
                                <div class="flex items-center gap-3">
                                    <span class="text-xl sm:text-2xl">{{ $project['image'] }}</span>
                                    <h4 class="font-bold text-sm sm:text-base lg:text-lg">{{ $project['title'] }}</h4>
                                </div>
                                <span class="text-xs bg-red-800 dark:bg-red-900 px-2 py-1 rounded flex-shrink-0">{{ $project['status'] }}</span>
                            </div>
                            <p class="text-red-100 dark:text-red-200 text-xs sm:text-sm mb-3">{{ $project['description'] }}</p>
                            <div class="flex flex-wrap gap-1 sm:gap-2">
                                @foreach($project['tech'] as $techItem)
                                <span class="text-xs bg-red-800 dark:bg-red-900 text-red-100 dark:text-red-200 px-2 py-1 rounded">{{ $techItem }}</span>
                                @endforeach
                            </div>
                        </div>
                        @endforeach
                    </div>
                    
                    <button class="mt-4 bg-red-800 dark:bg-red-900 hover:bg-red-900 dark:hover:bg-red-800 text-white px-4 sm:px-6 py-2 rounded-lg transition-colors text-sm sm:text-base">
                        View All Projects ‚Üí
                    </button>
                </div>
            </div>

            <!-- Social Links -->
            <div class="portfolio-card-colored bg-portfolio-yellow dark:bg-yellow-500 text-gray-800 dark:text-gray-900">
                <div class="text-center">
                    <h3 class="text-xl sm:text-2xl font-bold mb-6 sm:mb-8 text-gray-700 dark:text-gray-800">Connect With Me</h3>
                    
                    <!-- Social Icons Grid for Mobile -->
                    <div class="grid grid-cols-3 gap-4 sm:flex sm:justify-center sm:space-x-6 mb-6 sm:mb-8">
                        <a href="https://github.com" class="social-icon hover:text-gray-600 dark:hover:text-gray-700 flex flex-col items-center gap-1" title="GitHub">
                            <span class="text-2xl sm:text-3xl">üêô</span>
                            <span class="text-xs sm:hidden">GitHub</span>
                        </a>
                        <a href="https://linkedin.com" class="social-icon hover:text-blue-600 dark:hover:text-blue-700 flex flex-col items-center gap-1" title="LinkedIn">
                            <span class="text-2xl sm:text-3xl">üíº</span>
                            <span class="text-xs sm:hidden">LinkedIn</span>
                        </a>
                        <a href="https://facebook.com" class="social-icon hover:text-blue-500 dark:hover:text-blue-600 flex flex-col items-center gap-1" title="Facebook">
                            <span class="text-2xl sm:text-3xl">üìò</span>
                            <span class="text-xs sm:hidden">Facebook</span>
                        </a>
                        <a href="https://instagram.com" class="social-icon hover:text-pink-500 dark:hover:text-pink-600 flex flex-col items-center gap-1 sm:block" title="Instagram">
                            <span class="text-2xl sm:text-3xl">üì∑</span>
                            <span class="text-xs sm:hidden">Instagram</span>
                        </a>
                        <a href="https://twitter.com" class="social-icon hover:text-blue-400 dark:hover:text-blue-500 flex flex-col items-center gap-1 sm:block" title="Twitter">
                            <span class="text-2xl sm:text-3xl">üê¶</span>
                            <span class="text-xs sm:hidden">Twitter</span>
                        </a>
                        <a href="mailto:jay.revis@email.com" class="social-icon hover:text-red-500 dark:hover:text-red-600 flex flex-col items-center gap-1 sm:block" title="Email">
                            <span class="text-2xl sm:text-3xl">‚úâÔ∏è</span>
                            <span class="text-xs sm:hidden">Email</span>
                        </a>
                    </div>